{"StartAt": "START GLPROD COMPACTION JOBS", "States": {"START GLPROD COMPACTION JOBS": {"Type": "Wait", "InputPath": "$", "Seconds": 3, "Next": "GET LAMBDA"}, "GET LAMBDA": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.GET_LAMBDA", "StringEquals": "Y", "Next": "SKIP GET LAMBDA"}], "Default": "EXECUTE GET LAMBDA"}, "EXECUTE GET LAMBDA": {"Type": "Task", "InputPath": "$", "ResultPath": "$.INPUT.BATCH_NUMBER", "Resource": "arn:aws:lambda:us-east-1:541574621075:function:ddb_get_lambda", "Next": "SKIP GET LAMBDA"}, "SKIP GET LAMBDA": {"Type": "Pass", "InputPath": "$", "ResultPath": "$.SKIP_LAMBDA", "Next": "StartParallel"}, "StartParallel": {"Type": "Parallel", "Next": "Completed", "ResultPath": "$.parallelResult", "Branches": [{"StartAt": "GLPROD_GEHC_GPO_STALLED_ORDER_REASON", "States": {"GLPROD_GEHC_GPO_STALLED_ORDER_REASON": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_gehc_gpo_stalled_order_reason", "StringEquals": "Y", "Next": "PASS GLPROD_GEHC_GPO_STALLED_ORDER_REASON"}], "Default": "LOAD GLPROD_GEHC_GPO_STALLED_ORDER_REASON"}, "LOAD GLPROD_GEHC_GPO_STALLED_ORDER_REASON": {"Type": "Task", "ResultPath": "$.GLPROD_GEHC_GPO_STALLED_ORDER_REASON", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_gehc_gpo_stalled_order_reason", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_GEHC_GPO_STALLED_ORDER_REASON_FAILED"}], "Next": "PASS GLPROD_GEHC_GPO_STALLED_ORDER_REASON"}, "SNS_GLPROD_GEHC_GPO_STALLED_ORDER_REASON_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_GEHC_GPO_STALLED_ORDER_REASON Failed!"}, "Next": "GLPROD_GEHC_GPO_STALLED_ORDER_REASON_ACTIVITY"}, "GLPROD_GEHC_GPO_STALLED_ORDER_REASON_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_GEHC_GPO_STALLED_ORDER_REASON_ACTIVITY", "End": true}, "PASS GLPROD_GEHC_GPO_STALLED_ORDER_REASON": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_FND_LOOKUP_VALUES", "States": {"GLPROD_FND_LOOKUP_VALUES": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_fnd_lookup_values", "StringEquals": "Y", "Next": "PASS GLPROD_FND_LOOKUP_VALUES"}], "Default": "LOAD GLPROD_FND_LOOKUP_VALUES"}, "LOAD GLPROD_FND_LOOKUP_VALUES": {"Type": "Task", "ResultPath": "$.GLPROD_FND_LOOKUP_VALUES", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_fnd_lookup_values", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_FND_LOOKUP_VALUES_FAILED"}], "Next": "PASS GLPROD_FND_LOOKUP_VALUES"}, "SNS_GLPROD_FND_LOOKUP_VALUES_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_FND_LOOKUP_VALUES Failed!"}, "Next": "GLPROD_FND_LOOKUP_VALUES_ACTIVITY"}, "GLPROD_FND_LOOKUP_VALUES_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_FND_LOOKUP_VALUES_ACTIVITY", "End": true}, "PASS GLPROD_FND_LOOKUP_VALUES": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_GL_CODE_COMBINATIONS", "States": {"GLPROD_GL_CODE_COMBINATIONS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_gl_code_combinations", "StringEquals": "Y", "Next": "PASS GLPROD_GL_CODE_COMBINATIONS"}], "Default": "LOAD GLPROD_GL_CODE_COMBINATIONS"}, "LOAD GLPROD_GL_CODE_COMBINATIONS": {"Type": "Task", "ResultPath": "$.GLPROD_GL_CODE_COMBINATIONS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_gl_code_combinations", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_GL_CODE_COMBINATIONS_FAILED"}], "Next": "PASS GLPROD_GL_CODE_COMBINATIONS"}, "SNS_GLPROD_GL_CODE_COMBINATIONS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_GL_CODE_COMBINATIONS Failed!"}, "Next": "GLPROD_GL_CODE_COMBINATIONS_ACTIVITY"}, "GLPROD_GL_CODE_COMBINATIONS_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_GL_CODE_COMBINATIONS_ACTIVITY", "End": true}, "PASS GLPROD_GL_CODE_COMBINATIONS": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_FND_FLEX_VALUES", "States": {"GLPROD_FND_FLEX_VALUES": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_fnd_flex_values", "StringEquals": "Y", "Next": "PASS GLPROD_FND_FLEX_VALUES"}], "Default": "LOAD GLPROD_FND_FLEX_VALUES"}, "LOAD GLPROD_FND_FLEX_VALUES": {"Type": "Task", "ResultPath": "$.GLPROD_FND_FLEX_VALUES", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_fnd_flex_values", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_FND_FLEX_VALUES_FAILED"}], "Next": "PASS GLPROD_FND_FLEX_VALUES"}, "SNS_GLPROD_FND_FLEX_VALUES_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_FND_FLEX_VALUES Failed!"}, "Next": "GLPROD_FND_FLEX_VALUES_ACTIVITY"}, "GLPROD_FND_FLEX_VALUES_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_FND_FLEX_VALUES_ACTIVITY", "End": true}, "PASS GLPROD_FND_FLEX_VALUES": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_FND_FLEX_VALUE_SETS", "States": {"GLPROD_FND_FLEX_VALUE_SETS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_fnd_flex_value_sets", "StringEquals": "Y", "Next": "PASS GLPROD_FND_FLEX_VALUE_SETS"}], "Default": "LOAD GLPROD_FND_FLEX_VALUE_SETS"}, "LOAD GLPROD_FND_FLEX_VALUE_SETS": {"Type": "Task", "ResultPath": "$.GLPROD_FND_FLEX_VALUE_SETS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_fnd_flex_value_sets", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_FND_FLEX_VALUE_SETS_FAILED"}], "Next": "PASS GLPROD_FND_FLEX_VALUE_SETS"}, "SNS_GLPROD_FND_FLEX_VALUE_SETS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_FND_FLEX_VALUE_SETS Failed!"}, "Next": "GLPROD_FND_FLEX_VALUE_SETS_ACTIVITY"}, "GLPROD_FND_FLEX_VALUE_SETS_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_FND_FLEX_VALUE_SETS_ACTIVITY", "End": true}, "PASS GLPROD_FND_FLEX_VALUE_SETS": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_FND_FLEX_VALUES_TL", "States": {"GLPROD_FND_FLEX_VALUES_TL": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_fnd_flex_values_tl", "StringEquals": "Y", "Next": "PASS GLPROD_FND_FLEX_VALUES_TL"}], "Default": "LOAD GLPROD_FND_FLEX_VALUES_TL"}, "LOAD GLPROD_FND_FLEX_VALUES_TL": {"Type": "Task", "ResultPath": "$.GLPROD_FND_FLEX_VALUES_TL", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_fnd_flex_values_tl", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_FND_FLEX_VALUES_TL_FAILED"}], "Next": "PASS GLPROD_FND_FLEX_VALUES_TL"}, "SNS_GLPROD_FND_FLEX_VALUES_TL_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_FND_FLEX_VALUES_TL Failed!"}, "Next": "GLPROD_FND_FLEX_VALUES_TL_ACTIVITY"}, "GLPROD_FND_FLEX_VALUES_TL_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_FND_FLEX_VALUES_TL_ACTIVITY", "End": true}, "PASS GLPROD_FND_FLEX_VALUES_TL": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_GEMS_AREL_HISTORY", "States": {"GLPROD_GEMS_AREL_HISTORY": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_gems_arel_history", "StringEquals": "Y", "Next": "PASS GLPROD_GEMS_AREL_HISTORY"}], "Default": "LOAD GLPROD_GEMS_AREL_HISTORY"}, "LOAD GLPROD_GEMS_AREL_HISTORY": {"Type": "Task", "ResultPath": "$.GLPROD_GEMS_AREL_HISTORY", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_gems_arel_history", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_GEMS_AREL_HISTORY_FAILED"}], "Next": "PASS GLPROD_GEMS_AREL_HISTORY"}, "SNS_GLPROD_GEMS_AREL_HISTORY_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_GEMS_AREL_HISTORY Failed!"}, "Next": "GLPROD_GEMS_AREL_HISTORY_ACTIVITY"}, "GLPROD_GEMS_AREL_HISTORY_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_GEMS_AREL_HISTORY_ACTIVITY", "End": true}, "PASS GLPROD_GEMS_AREL_HISTORY": {"Type": "Pass", "End": true}}}]}, "Completed": {"Type": "Pass", "InputPath": "$.SKIP_LAMBDA", "Next": "SNS_GLPROD_COMPACTION_SUCCESS"}, "SNS_GLPROD_COMPACTION_SUCCESS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.snsResult", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_SUCCESS", "Message": {"Subject": "AWS Step function for GLPROD COMPACTION completed successfully!!"}}, "End": true}}}