{"StartAt": "START RULESTUDIO_RDS_LOAD SCHEDULE", "States": {"START RULESTUDIO_RDS_LOAD SCHEDULE": {"Type": "Pass", "InputPath": "$", "OutputPath": "$", "Next": "PRD_OPH_MAIN_HIER_D"}, "PRD_OPH_MAIN_HIER_D": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.PRD_OPH_MAIN_HIER_D", "StringEquals": "Y", "Next": "SKIP PRD_OPH_MAIN_HIER_D"}], "Default": "LOAD PRD_OPH_MAIN_HIER_D"}, "LOAD PRD_OPH_MAIN_HIER_D": {"Type": "Task", "InputPath": "$", "ResultPath": "$.PRD_OPH_MAIN_HIER_D", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_rds_load_prd_oph_main_hier_d", "Arguments": {"--aws_secret": "rds_rulestudio_secrets", "--region_name": "us-east-1"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_PRD_OPH_MAIN_HIER_D_FAILED"}], "Next": "SKIP PRD_OPH_MAIN_HIER_D"}, "SNS_PRD_OPH_MAIN_HIER_D_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS GLUE SHELL JOB FOR PRD_OPH_MAIN_HIER_D FAILED!"}, "End": false}, "SKIP PRD_OPH_MAIN_HIER_D": {"Type": "Pass", "Next": "UPGRADE_REPORTING_STAGE_TAB"}, "UPGRADE_REPORTING_STAGE_TAB": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.UPGRADE_REPORTING_STAGE_TAB", "StringEquals": "Y", "Next": "SKIP UPGRADE_REPORTING_STAGE_TAB"}], "Default": "LOAD UPGRADE_REPORTING_STAGE_TAB"}, "LOAD UPGRADE_REPORTING_STAGE_TAB": {"Type": "Task", "InputPath": "$", "ResultPath": "$.UPGRADE_REPORTING_STAGE_TAB", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_rds_load_upgrade_reporting_stage_tab", "Arguments": {"--aws_secret": "rds_rulestudio_secrets", "--region_name": "us-east-1"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_UPGRADE_REPORTING_STAGE_TAB_FAILED"}], "Next": "SKIP UPGRADE_REPORTING_STAGE_TAB"}, "SNS_UPGRADE_REPORTING_STAGE_TAB_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS GLUE SHELL JOB FOR UPGRADE_REPORTING_STAGE_TAB FAILED!"}, "End": false}, "SKIP UPGRADE_REPORTING_STAGE_TAB": {"Type": "Pass", "Next": "UPGRADE_REPORTING_STAGE_TAB_IB_UNIVERSE"}, "UPGRADE_REPORTING_STAGE_TAB_IB_UNIVERSE": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.UPGRADE_REPORTING_STAGE_TAB_IB_UNIVERSE", "StringEquals": "Y", "Next": "SKIP UPGRADE_REPORTING_STAGE_TAB_IB_UNIVERSE"}], "Default": "LOAD UPGRADE_REPORTING_STAGE_TAB_IB_UNIVERSE"}, "LOAD UPGRADE_REPORTING_STAGE_TAB_IB_UNIVERSE": {"Type": "Task", "InputPath": "$", "ResultPath": "$.UPGRADE_REPORTING_STAGE_TAB_IB_UNIVERSE", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_rds_load_upgrade_reporting_stage_tab_ib_universe", "Arguments": {"--aws_secret": "rds_rulestudio_secrets", "--region_name": "us-east-1"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_UPGRADE_REPORTING_STAGE_TAB_IB_UNIVERSE_FAILED"}], "Next": "SKIP UPGRADE_REPORTING_STAGE_TAB_IB_UNIVERSE"}, "SNS_UPGRADE_REPORTING_STAGE_TAB_IB_UNIVERSE_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS GLUE SHELL JOB FOR UPGRADE_REPORTING_STAGE_TAB_IB_UNIVERSE FAILED!"}, "End": false}, "SKIP UPGRADE_REPORTING_STAGE_TAB_IB_UNIVERSE": {"Type": "Pass", "Next": "Completed"}, "Completed": {"Type": "Pass", "Next": "SNS_RULESTUDIO_RDS_LOAD_SUCCESS"}, "SNS_RULESTUDIO_RDS_LOAD_SUCCESS": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_SUCCESS", "Message": {"Subject": "AWS Step function for RULESTUDIO_RDS_LOAD completed successfully!!"}}, "End": true}}}