{"StartAt": "START IB_INTEL_ENTITY_ONE_TIME_INSERT SCHEDULE", "States": {"START IB_INTEL_ENTITY_ONE_TIME_INSERT SCHEDULE": {"Type": "Pass", "InputPath": "$", "OutputPath": "$", "Next": "SRV_ASSET_F_CARES_INSERT"}, "SRV_ASSET_F_CARES_INSERT": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.SRV_ASSET_F_CARES_INSERT", "StringEquals": "Y", "Next": "PASS SRV_ASSET_F_CARES_INSERT"}], "Default": "LOAD SRV_ASSET_F_CARES_INSERT"}, "LOAD SRV_ASSET_F_CARES_INSERT": {"Type": "Task", "InputPath": "$", "ResultPath": "$.SRV_ASSET_F_CARES_INSERT", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_otl_rs_proc", "Arguments": {"--rs_proc_name": "hdl_services_sp.sp_srv_asset_f_cares_insert", "--s3path": "s3://odp-us-prod-ent-raw/cares/srv_asset_f/gp_cares_new.csv", "--aws_secret": "us-prod-odp-entity-cds-fsso", "--arn": "arn:aws:iam::245792935030:role/ODP-US-Prod-AWSServiceRole", "--region": "us-east-1"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_SRV_ASSET_F_CARES_INSERT_FAILED"}], "Next": "PASS SRV_ASSET_F_CARES_INSERT"}, "SNS_SRV_ASSET_F_CARES_INSERT_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:245792935030:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS GLUE SHELL JOB FOR SRV_ASSET_F_CARES_INSERT FAILED!"}, "End": false}, "PASS SRV_ASSET_F_CARES_INSERT": {"Type": "Pass", "Next": "SRV_ASSET_F_CAPS_INSERT"}, "SRV_ASSET_F_CAPS_INSERT": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.SRV_ASSET_F_CAPS_INSERT", "StringEquals": "Y", "Next": "PASS SRV_ASSET_F_CAPS_INSERT"}], "Default": "LOAD SRV_ASSET_F_CAPS_INSERT"}, "LOAD SRV_ASSET_F_CAPS_INSERT": {"Type": "Task", "InputPath": "$", "ResultPath": "$.SRV_ASSET_F_CAPS_INSERT", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_otl_rs_proc", "Arguments": {"--rs_proc_name": "hdl_services_sp.sp_srv_asset_f_caps_insert", "--s3path": "s3://odp-us-prod-ent-raw/caps/srv_asset_f/gp_caps_new_v3.csv", "--aws_secret": "us-prod-odp-entity-cds-fsso", "--arn": "arn:aws:iam::245792935030:role/ODP-US-Prod-AWSServiceRole", "--region": "us-east-1"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_SRV_ASSET_F_CAPS_INSERT_FAILED"}], "Next": "PASS SRV_ASSET_F_CAPS_INSERT"}, "SNS_SRV_ASSET_F_CAPS_INSERT_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:245792935030:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS GLUE SHELL JOB FOR SRV_ASSET_F_CAPS_INSERT FAILED!"}, "End": false}, "PASS SRV_ASSET_F_CAPS_INSERT": {"Type": "Pass", "Next": "SRV_ASSET_CDS_EXCLUSION_AREACODE_INSERT"}, "SRV_ASSET_CDS_EXCLUSION_AREACODE_INSERT": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.SRV_ASSET_CDS_EXCLUSION_AREACODE_INSERT", "StringEquals": "Y", "Next": "PASS SRV_ASSET_CDS_EXCLUSION_AREACODE_INSERT"}], "Default": "LOAD SRV_ASSET_CDS_EXCLUSION_AREACODE_INSERT"}, "LOAD SRV_ASSET_CDS_EXCLUSION_AREACODE_INSERT": {"Type": "Task", "InputPath": "$", "ResultPath": "$.SRV_ASSET_CDS_EXCLUSION_AREACODE_INSERT", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_otl_rs_proc", "Arguments": {"--rs_proc_name": "hdl_services_sp.sp_srv_asset_cds_exclusion_areacode_insert", "--s3path": "s3://odp-us-prod-ent-raw/servicesuit_common/srv_asset_cds_exclusion_areacode/SRV_ASSET_CDS_EXCLUSION_AREACODE.csv", "--aws_secret": "us-prod-odp-entity-cds-fsso", "--arn": "arn:aws:iam::245792935030:role/ODP-US-Prod-AWSServiceRole", "--region": "us-east-1"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_SRV_ASSET_CDS_EXCLUSION_AREACODE_INSERT_FAILED"}], "Next": "PASS SRV_ASSET_CDS_EXCLUSION_AREACODE_INSERT"}, "SNS_SRV_ASSET_CDS_EXCLUSION_AREACODE_INSERT_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:245792935030:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS GLUE SHELL JOB FOR SRV_ASSET_CDS_EXCLUSION_AREACODE_INSERT FAILED!"}, "End": false}, "PASS SRV_ASSET_CDS_EXCLUSION_AREACODE_INSERT": {"Type": "Pass", "Next": "MUST_DB_PREFERENCE_INSERT"}, "MUST_DB_PREFERENCE_INSERT": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.MUST_DB_PREFERENCE_INSERT", "StringEquals": "Y", "Next": "PASS MUST_DB_PREFERENCE_INSERT"}], "Default": "LOAD MUST_DB_PREFERENCE_INSERT"}, "LOAD MUST_DB_PREFERENCE_INSERT": {"Type": "Task", "InputPath": "$", "ResultPath": "$.MUST_DB_PREFERENCE_INSERT", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_otl_rs_proc", "Arguments": {"--rs_proc_name": "hdl_services_sp.sp_must_db_preference_insert", "--s3path": "s3://odp-us-prod-ent-raw/servicesuit_common/must_db_preference/MUST_DB_PREFERENCE.csv", "--aws_secret": "us-prod-odp-entity-cds-fsso", "--arn": "arn:aws:iam::245792935030:role/ODP-US-Prod-AWSServiceRole", "--region": "us-east-1"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_MUST_DB_PREFERENCE_INSERT_FAILED"}], "Next": "PASS MUST_DB_PREFERENCE_INSERT"}, "SNS_MUST_DB_PREFERENCE_INSERT_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:245792935030:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS GLUE SHELL JOB FOR MUST_DB_PREFERENCE_INSERT FAILED!"}, "End": false}, "PASS MUST_DB_PREFERENCE_INSERT": {"Type": "Pass", "Next": "LUT_SUV_INSERT"}, "LUT_SUV_INSERT": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.LUT_SUV_INSERT", "StringEquals": "Y", "Next": "PASS LUT_SUV_INSERT"}], "Default": "LOAD LUT_SUV_INSERT"}, "LOAD LUT_SUV_INSERT": {"Type": "Task", "InputPath": "$", "ResultPath": "$.LUT_SUV_INSERT", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_otl_rs_proc", "Arguments": {"--rs_proc_name": "hdl_services_sp.sp_lut_suv_insert", "--s3path": "s3://odp-us-prod-ent-raw/servicesuit_common/lut_sav/lut_sav.csv", "--aws_secret": "us-prod-odp-entity-cds-fsso", "--arn": "arn:aws:iam::245792935030:role/ODP-US-Prod-AWSServiceRole", "--region": "us-east-1"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_LUT_SUV_INSERT_FAILED"}], "Next": "PASS LUT_SUV_INSERT"}, "SNS_LUT_SUV_INSERT_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:245792935030:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS GLUE SHELL JOB FOR LUT_EU_SAV FAILED!"}, "End": false}, "PASS LUT_SUV_INSERT": {"Type": "Pass", "Next": "LUT_EU_SAV"}, "LUT_EU_SAV": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.LUT_EU_SAV", "StringEquals": "Y", "Next": "PASS LUT_EU_SAV"}], "Default": "LOAD LUT_EU_SAV"}, "LOAD LUT_EU_SAV": {"Type": "Task", "InputPath": "$", "ResultPath": "$.LUT_EU_SAV", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_otl_rs_proc", "Arguments": {"--rs_proc_name": "hdl_services_compaction_sp.sp_lut_eu_sav_parts_files_insert", "--s3path": "s3://odp-us-prod-ent-raw/parts_files/parts_files/lut_eu_sav/year=2020/", "--aws_secret": "us-prod-odp-compaction-fsso", "--arn": "arn:aws:iam::245792935030:role/ODP-US-Prod-AWSServiceRole", "--region": "us-east-1"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_LUT_SUV_INSERT_FAILED"}], "Next": "PASS LUT_EU_SAV"}, "PASS LUT_EU_SAV": {"Type": "Pass", "Next": "INSTALLED_COUNTRY_MAPPING_INSERT"}, "INSTALLED_COUNTRY_MAPPING_INSERT": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.INSTALLED_COUNTRY_MAPPING_INSERT", "StringEquals": "Y", "Next": "PASS INSTALLED_COUNTRY_MAPPING_INSERT"}], "Default": "LOAD INSTALLED_COUNTRY_MAPPING_INSERT"}, "LOAD INSTALLED_COUNTRY_MAPPING_INSERT": {"Type": "Task", "InputPath": "$", "ResultPath": "$.INSTALLED_COUNTRY_MAPPING_INSERT", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_otl_rs_proc", "Arguments": {"--rs_proc_name": "hdl_services_sp.sp_installed_country_mapping_insert", "--s3path": "s3://odp-us-prod-ent-raw/servicesuit_common/installed_country_mapping/INSTALLED_COUNTRY_MAPPING.csv", "--aws_secret": "us-prod-odp-entity-cds-fsso", "--arn": "arn:aws:iam::245792935030:role/ODP-US-Prod-AWSServiceRole", "--region": "us-east-1"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_INSTALLED_COUNTRY_MAPPING_INSERT_FAILED"}], "Next": "PASS INSTALLED_COUNTRY_MAPPING_INSERT"}, "SNS_INSTALLED_COUNTRY_MAPPING_INSERT_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:245792935030:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS GLUE SHELL JOB FOR INSTALLED_COUNTRY_MAPPING_INSERT FAILED!"}, "End": false}, "PASS INSTALLED_COUNTRY_MAPPING_INSERT": {"Type": "Pass", "Next": "COUNTRY_CODE_MAPPING_INSERT"}, "COUNTRY_CODE_MAPPING_INSERT": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.COUNTRY_CODE_MAPPING_INSERT", "StringEquals": "Y", "Next": "PASS COUNTRY_CODE_MAPPING_INSERT"}], "Default": "LOAD COUNTRY_CODE_MAPPING_INSERT"}, "LOAD COUNTRY_CODE_MAPPING_INSERT": {"Type": "Task", "InputPath": "$", "ResultPath": "$.COUNTRY_CODE_MAPPING_INSERT", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_otl_rs_proc", "Arguments": {"--rs_proc_name": "hdl_services_sp.sp_country_code_mapping_insert", "--s3path": "s3://odp-us-prod-ent-raw/servicesuit_common/country_code_mapping/COUNTRY_CODE_MAPPING.csv", "--aws_secret": "us-prod-odp-entity-cds-fsso", "--arn": "arn:aws:iam::245792935030:role/ODP-US-Prod-AWSServiceRole", "--region": "us-east-1"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_COUNTRY_CODE_MAPPING_INSERT_FAILED"}], "Next": "PASS COUNTRY_CODE_MAPPING_INSERT"}, "SNS_COUNTRY_CODE_MAPPING_INSERT_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:245792935030:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS GLUE SHELL JOB FOR COUNTRY_CODE_MAPPING_INSERT FAILED!"}, "End": false}, "PASS COUNTRY_CODE_MAPPING_INSERT": {"Type": "Pass", "Next": "Completed"}, "Completed": {"Type": "Pass", "Next": "SNS_IB_INTEL_ENTITY_ONE_TIME_INSERT_SUCCESS"}, "SNS_IB_INTEL_ENTITY_ONE_TIME_INSERT_SUCCESS": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:245792935030:ODP_SFN_SUCCESS", "Message": {"Subject": "AWS Step function for IB_INTEL_ENTITY_ONE_TIME_INSERT completed successfully!!"}}, "End": true}}}