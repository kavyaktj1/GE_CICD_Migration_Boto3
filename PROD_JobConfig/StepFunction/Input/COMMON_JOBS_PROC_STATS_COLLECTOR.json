{"StartAt": "START COMMON_JOBS_PROC_STATS_COLLECTOR", "States": {"START COMMON_JOBS_PROC_STATS_COLLECTOR": {"Type": "Pass", "InputPath": "$", "OutputPath": "$", "Next": "CDE_PROC_STATS"}, "CDE_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.CDE_PROC_STATS", "StringEquals": "Y", "Next": "PASS CDE_PROC_STATS"}], "Default": "LOAD CDE_PROC_STATS"}, "LOAD CDE_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.CDE_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('CDE', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_CDE_PROC_STATS_FAILED"}], "Next": "PASS CDE_PROC_STATS"}, "SNS_CDE_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for CDE_PROC_STATS_FAILED FAILED!"}, "End": false}, "PASS CDE_PROC_STATS": {"Type": "Pass", "Next": "CIE_PROC_STATS"}, "CIE_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.CIE_PROC_STATS", "StringEquals": "Y", "Next": "PASS CIE_PROC_STATS"}], "Default": "LOAD CIE_PROC_STATS"}, "LOAD CIE_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.CIE_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('CIE', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_CIE_PROC_STATS_FAILED"}], "Next": "PASS CIE_PROC_STATS"}, "SNS_CIE_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for CIE_PROC_STATS_FAILED FAILED!"}, "End": false}, "PASS CIE_PROC_STATS": {"Type": "Pass", "Next": "CIC_PROC_STATS"}, "CIC_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.CIC_PROC_STATS", "StringEquals": "Y", "Next": "PASS CIC_PROC_STATS"}], "Default": "LOAD CIC_PROC_STATS"}, "LOAD CIC_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.CIC_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('CIC', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_CIC_PROC_STATS_FAILED"}], "Next": "PASS CIC_PROC_STATS"}, "SNS_CIC_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for COMMON_JOBS_PROC_STATS_COLLECTOR FAILED!"}, "End": false}, "PASS CIC_PROC_STATS": {"Type": "Pass", "Next": "SRE_PROC_STATS"}, "SRE_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.SRE_PROC_STATS", "StringEquals": "Y", "Next": "PASS SRE_PROC_STATS"}], "Default": "LOAD SRE_PROC_STATS"}, "LOAD SRE_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.SRE_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('SRE', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_SRE_PROC_STATS_FAILED"}], "Next": "PASS SRE_PROC_STATS"}, "SNS_SRE_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for SRE_PROC_STATS_FAILED FAILED!"}, "End": false}, "PASS SRE_PROC_STATS": {"Type": "Pass", "Next": "SRC_PROC_STATS"}, "SRC_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.SRC_PROC_STATS", "StringEquals": "Y", "Next": "PASS SRC_PROC_STATS"}], "Default": "LOAD SRC_PROC_STATS"}, "LOAD SRC_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.SRC_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('SRC', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_SRC_PROC_STATS_FAILED"}], "Next": "PASS SRC_PROC_STATS"}, "SNS_SRC_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for SRC_PROC_STATS_FAILED FAILED!"}, "End": false}, "PASS SRC_PROC_STATS": {"Type": "Pass", "Next": "IBE_PROC_STATS"}, "IBE_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.IBE_PROC_STATS", "StringEquals": "Y", "Next": "PASS IBE_PROC_STATS"}], "Default": "LOAD IBE_PROC_STATS"}, "LOAD IBE_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.IBE_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('IBE', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_IBE_PROC_STATS_FAILED"}], "Next": "PASS IBE_PROC_STATS"}, "SNS_IBE_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for IBE_PROC_STATS_FAILED FAILED!"}, "End": false}, "PASS IBE_PROC_STATS": {"Type": "Pass", "Next": "IBC_PROC_STATS"}, "IBC_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.IBC_PROC_STATS", "StringEquals": "Y", "Next": "PASS IBC_PROC_STATS"}], "Default": "LOAD IBC_PROC_STATS"}, "LOAD IBC_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.IBC_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('IBC', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_IBC_PROC_STATS_FAILED"}], "Next": "PASS IBC_PROC_STATS"}, "SNS_IBC_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for IBC_PROC_STATS_FAILED FAILED!"}, "End": false}, "PASS IBC_PROC_STATS": {"Type": "Pass", "Next": "OUC_PROC_STATS"}, "OUC_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.OUC_PROC_STATS", "StringEquals": "Y", "Next": "PASS OUC_PROC_STATS"}], "Default": "LOAD OUC_PROC_STATS"}, "LOAD OUC_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.OUC_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('OUC', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_OUC_PROC_STATS_FAILED"}], "Next": "PASS OUC_PROC_STATS"}, "SNS_OUC_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for OUC_PROC_STATS_FAILED FAILED!"}, "End": false}, "PASS OUC_PROC_STATS": {"Type": "Pass", "Next": "MAC_PROC_STATS"}, "MAC_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.MAC_PROC_STATS", "StringEquals": "Y", "Next": "PASS MAC_PROC_STATS"}], "Default": "LOAD MAC_PROC_STATS"}, "LOAD MAC_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.MAC_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('MAC', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_MAC_PROC_STATS_FAILED"}], "Next": "PASS MAC_PROC_STATS"}, "SNS_MAC_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for MAC_PROC_STATS_FAILED FAILED!"}, "End": false}, "PASS MAC_PROC_STATS": {"Type": "Pass", "Next": "MAE_PROC_STATS"}, "MAE_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.MAE_PROC_STATS", "StringEquals": "Y", "Next": "PASS MAE_PROC_STATS"}], "Default": "LOAD MAE_PROC_STATS"}, "LOAD MAE_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.MAE_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('MAE', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_MAE_PROC_STATS_FAILED"}], "Next": "PASS MAE_PROC_STATS"}, "SNS_MAE_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for MAE_PROC_STATS_FAILED FAILED!"}, "End": false}, "PASS MAE_PROC_STATS": {"Type": "Pass", "Next": "NPC_PROC_STATS"}, "NPC_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.NPC_PROC_STATS", "StringEquals": "Y", "Next": "PASS NPC_PROC_STATS"}], "Default": "LOAD NPC_PROC_STATS"}, "LOAD NPC_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.NPC_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('NPC', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_NPC_PROC_STATS_FAILED"}], "Next": "PASS NPC_PROC_STATS"}, "SNS_NPC_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for NPC_PROC_STATS_FAILED FAILED!"}, "End": false}, "PASS NPC_PROC_STATS": {"Type": "Pass", "Next": "MAS_PROC_STATS"}, "MAS_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.MAS_PROC_STATS", "StringEquals": "Y", "Next": "PASS MAS_PROC_STATS"}], "Default": "LOAD MAS_PROC_STATS"}, "LOAD MAS_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.MAS_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('MAS', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_MAS_PROC_STATS_FAILED"}], "Next": "PASS MAS_PROC_STATS"}, "SNS_MAS_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for MAS_PROC_STATS_FAILED FAILED!"}, "End": false}, "PASS MAS_PROC_STATS": {"Type": "Pass", "Next": "DEFAULT_PROC_STATS"}, "DEFAULT_PROC_STATS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.DEFAULT_PROC_STATS", "StringEquals": "Y", "Next": "PASS DEFAULT_PROC_STATS"}], "Default": "LOAD DEFAULT_PROC_STATS"}, "LOAD DEFAULT_PROC_STATS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.DEFAULT_PROC_STATS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_mrr_entity_cds_rs_proc", "Arguments": {"--rs_proc_name": "userutils.sp_fetch_proc_stats('default', NULL, 1)", "--query_tag": "CMN-proc-stats", "--aws_secret": "us-prod-ss-common-track-secret", "--stats_flg": "Y"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_DEFAULT_PROC_STATS_FAILED"}], "Next": "PASS DEFAULT_PROC_STATS"}, "SNS_DEFAULT_PROC_STATS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": "AWS Glue Shell job for DEFAULT_PROC_STATS_FAILED FAILED!"}, "End": false}, "PASS DEFAULT_PROC_STATS": {"Type": "Pass", "Next": "Completed"}, "Completed": {"Type": "Pass", "Next": "SNS_CIC_PROC_STATS"}, "SNS_CIC_PROC_STATS": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_SUCCESS", "Message": {"Subject": "AWS Step function for COMMON_JOBS_PROC_STATS_COLLECTOR completed successfully!!!"}}, "End": true}}}