{"StartAt": "Start Crawler Lambda", "States": {"Start Crawler Lambda": {"Type": "Task", "InputPath": "$", "OutputPath": "$", "Resource": "arn:aws:lambda:us-east-1:541574621075:function:start_glue_crawler", "Retry": [{"ErrorEquals": ["CrawlerAlreadyRunning"], "IntervalSeconds": 60, "MaxAttempts": 2, "BackoffRate": 1.5}], "ResultPath": "$.start_lambda", "Next": "TimeInSec Wait"}, "TimeInSec Wait": {"Type": "Wait", "InputPath": "$", "OutputPath": "$", "SecondsPath": "$.start_lambda.LAST_RUNTIME_IN_SEC", "Next": "Start Polling Lambda"}, "Start Polling Lambda": {"Type": "Task", "InputPath": "$", "OutputPath": "$", "Resource": "arn:aws:lambda:us-east-1:541574621075:function:get_glue_metrics", "Retry": [{"ErrorEquals": ["CrawlerAlreadyRunning"], "IntervalSeconds": 60, "MaxAttempts": 5, "BackoffRate": 1.5}], "ResultPath": "$.Polling", "Next": "MedianSec Wait"}, "MedianSec Wait": {"Type": "Wait", "InputPath": "$", "OutputPath": "$", "SecondsPath": "$.Polling.LAST_MEDIAN_IN_SEC", "Next": "Fetch Table Details"}, "Fetch Table Details": {"Type": "Task", "Resource": "arn:aws:lambda:us-east-1:541574621075:function:glue_crawler_tbl_dtls", "InputPath": "$", "OutputPath": "$", "Retry": [{"ErrorEquals": ["CrawlerAlreadyRunning"], "IntervalSeconds": 60, "MaxAttempts": 5, "BackoffRate": 1.5}], "ResultPath": "$.crawler_tbl_dtls", "Next": "Table Choice"}, "Table Choice": {"Type": "Choice", "Choices": [{"Variable": "$.crawler_tbl_dtls.TablesDeleted", "NumericGreaterThan": 0, "Next": "SNS_UpdateTable_FAILED"}, {"Variable": "$.crawler_tbl_dtls.TablesCreated", "NumericGreaterThan": 0, "Next": "SNS_UpdateTable_FAILED"}], "Default": "SNS_UpdateTable_SUCCESS"}, "SNS_UpdateTable_SUCCESS": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_SUCCESS", "Message.$": "$.crawler_tbl_dtls.TablesUpdatedMessage", "Subject": "Crawler Status : Success"}, "OutputPath": "$", "End": true}, "SNS_UpdateTable_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.crawler_tbl_dtls.CreateDeleteMessage", "Subject": "Crawler Status : Failed"}, "OutputPath": "$", "End": true}}}