{"StartAt": "START MAPP_GLPROD COMPACTION JOBS", "States": {"START MAPP_GLPROD COMPACTION JOBS": {"Type": "Wait", "InputPath": "$", "Seconds": 210, "Next": "GET LAMBDA"}, "GET LAMBDA": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.GET_LAMBDA", "StringEquals": "Y", "Next": "SKIP GET LAMBDA"}], "Default": "EXECUTE GET LAMBDA"}, "EXECUTE GET LAMBDA": {"Type": "Task", "InputPath": "$", "ResultPath": "$.INPUT.BATCH_NUMBER", "Resource": "arn:aws:lambda:us-east-1:541574621075:function:ddb_get_lambda", "Next": "SKIP GET LAMBDA"}, "SKIP GET LAMBDA": {"Type": "Pass", "InputPath": "$", "ResultPath": "$.SKIP_LAMBDA", "Next": "StartParallel"}, "StartParallel": {"Type": "Parallel", "Next": "Completed", "ResultPath": "$.parallelResult", "Branches": [{"StartAt": "GLPROD_FND_FLEX_VALUES", "States": {"GLPROD_FND_FLEX_VALUES": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_fnd_flex_values", "StringEquals": "Y", "Next": "PASS GLPROD_FND_FLEX_VALUES"}], "Default": "LOAD GLPROD_FND_FLEX_VALUES"}, "LOAD GLPROD_FND_FLEX_VALUES": {"Type": "Task", "ResultPath": "$.GLPROD_FND_FLEX_VALUES", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_fnd_flex_values", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_FND_FLEX_VALUES_FAILED"}], "Next": "PASS GLPROD_FND_FLEX_VALUES"}, "SNS_GLPROD_FND_FLEX_VALUES_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_FND_FLEX_VALUES Failed!"}, "Next": "GLPROD_FND_FLEX_VALUES_ACTIVITY"}, "GLPROD_FND_FLEX_VALUES_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_FND_FLEX_VALUES_ACTIVITY", "End": true}, "PASS GLPROD_FND_FLEX_VALUES": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_FND_FLEX_VALUE_SETS", "States": {"GLPROD_FND_FLEX_VALUE_SETS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_fnd_flex_value_sets", "StringEquals": "Y", "Next": "PASS GLPROD_FND_FLEX_VALUE_SETS"}], "Default": "LOAD GLPROD_FND_FLEX_VALUE_SETS"}, "LOAD GLPROD_FND_FLEX_VALUE_SETS": {"Type": "Task", "ResultPath": "$.GLPROD_FND_FLEX_VALUE_SETS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_fnd_flex_value_sets", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_FND_FLEX_VALUE_SETS_FAILED"}], "Next": "PASS GLPROD_FND_FLEX_VALUE_SETS"}, "SNS_GLPROD_FND_FLEX_VALUE_SETS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_FND_FLEX_VALUE_SETS Failed!"}, "Next": "GLPROD_FND_FLEX_VALUE_SETS_ACTIVITY"}, "GLPROD_FND_FLEX_VALUE_SETS_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_FND_FLEX_VALUE_SETS_ACTIVITY", "End": true}, "PASS GLPROD_FND_FLEX_VALUE_SETS": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_FND_FLEX_VALUES_TL", "States": {"GLPROD_FND_FLEX_VALUES_TL": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_fnd_flex_values_tl", "StringEquals": "Y", "Next": "PASS GLPROD_FND_FLEX_VALUES_TL"}], "Default": "LOAD GLPROD_FND_FLEX_VALUES_TL"}, "LOAD GLPROD_FND_FLEX_VALUES_TL": {"Type": "Task", "ResultPath": "$.GLPROD_FND_FLEX_VALUES_TL", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_fnd_flex_values_tl", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_FND_FLEX_VALUES_TL_FAILED"}], "Next": "PASS GLPROD_FND_FLEX_VALUES_TL"}, "SNS_GLPROD_FND_FLEX_VALUES_TL_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_FND_FLEX_VALUES_TL Failed!"}, "Next": "GLPROD_FND_FLEX_VALUES_TL_ACTIVITY"}, "GLPROD_FND_FLEX_VALUES_TL_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_FND_FLEX_VALUES_TL_ACTIVITY", "End": true}, "PASS GLPROD_FND_FLEX_VALUES_TL": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_GEMS_AREL_HISTORY", "States": {"GLPROD_GEMS_AREL_HISTORY": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_gems_arel_history", "StringEquals": "Y", "Next": "PASS GLPROD_GEMS_AREL_HISTORY"}], "Default": "LOAD GLPROD_GEMS_AREL_HISTORY"}, "LOAD GLPROD_GEMS_AREL_HISTORY": {"Type": "Task", "ResultPath": "$.GLPROD_GEMS_AREL_HISTORY", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_gems_arel_history", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_GEMS_AREL_HISTORY_FAILED"}], "Next": "PASS GLPROD_GEMS_AREL_HISTORY"}, "SNS_GLPROD_GEMS_AREL_HISTORY_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_GEMS_AREL_HISTORY Failed!"}, "Next": "GLPROD_GEMS_AREL_HISTORY_ACTIVITY"}, "GLPROD_GEMS_AREL_HISTORY_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_GEMS_AREL_HISTORY_ACTIVITY", "End": true}, "PASS GLPROD_GEMS_AREL_HISTORY": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_HR_ALL_ORGANIZATION_UNITS", "States": {"GLPROD_HR_ALL_ORGANIZATION_UNITS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_hr_all_organization_units", "StringEquals": "Y", "Next": "PASS GLPROD_HR_ALL_ORGANIZATION_UNITS"}], "Default": "LOAD GLPROD_HR_ALL_ORGANIZATION_UNITS"}, "LOAD GLPROD_HR_ALL_ORGANIZATION_UNITS": {"Type": "Task", "ResultPath": "$.GLPROD_HR_ALL_ORGANIZATION_UNITS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_hr_all_organization_units", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_HR_ALL_ORGANIZATION_UNITS_FAILED"}], "Next": "PASS GLPROD_HR_ALL_ORGANIZATION_UNITS"}, "SNS_GLPROD_HR_ALL_ORGANIZATION_UNITS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_HR_ALL_ORGANIZATION_UNITS Failed!"}, "Next": "GLPROD_HR_ALL_ORGANIZATION_UNITS_ACTIVITY"}, "GLPROD_HR_ALL_ORGANIZATION_UNITS_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_HR_ALL_ORGANIZATION_UNITS_ACTIVITY", "End": true}, "PASS GLPROD_HR_ALL_ORGANIZATION_UNITS": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_HR_LOCATIONS", "States": {"GLPROD_HR_LOCATIONS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_full_refresh_glprod_hr_locations", "StringEquals": "Y", "Next": "PASS GLPROD_HR_LOCATIONS"}], "Default": "LOAD GLPROD_HR_LOCATIONS"}, "LOAD GLPROD_HR_LOCATIONS": {"Type": "Task", "ResultPath": "$.GLPROD_HR_LOCATIONS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_full_refresh_glprod_hr_locations", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_HR_LOCATIONS_FAILED"}], "Next": "PASS GLPROD_HR_LOCATIONS"}, "SNS_GLPROD_HR_LOCATIONS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_HR_LOCATIONS Failed!"}, "Next": "GLPROD_HR_LOCATIONS_ACTIVITY"}, "GLPROD_HR_LOCATIONS_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_HR_LOCATIONS_ACTIVITY", "End": true}, "PASS GLPROD_HR_LOCATIONS": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_GEMS_GPO_USER_GRP", "States": {"GLPROD_GEMS_GPO_USER_GRP": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_gems_gpo_user_grp", "StringEquals": "Y", "Next": "PASS GLPROD_GEMS_GPO_USER_GRP"}], "Default": "LOAD GLPROD_GEMS_GPO_USER_GRP"}, "LOAD GLPROD_GEMS_GPO_USER_GRP": {"Type": "Task", "ResultPath": "$.GLPROD_GEMS_GPO_USER_GRP", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_gems_gpo_user_grp", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_GEMS_GPO_USER_GRP_FAILED"}], "Next": "PASS GLPROD_GEMS_GPO_USER_GRP"}, "SNS_GLPROD_GEMS_GPO_USER_GRP_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_GEMS_GPO_USER_GRP Failed!"}, "Next": "GLPROD_GEMS_GPO_USER_GRP_ACTIVITY"}, "GLPROD_GEMS_GPO_USER_GRP_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_GEMS_GPO_USER_GRP_ACTIVITY", "End": true}, "PASS GLPROD_GEMS_GPO_USER_GRP": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_MTL_TXN_SOURCE_TYPES", "States": {"GLPROD_MTL_TXN_SOURCE_TYPES": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_mtl_txn_source_types", "StringEquals": "Y", "Next": "PASS GLPROD_MTL_TXN_SOURCE_TYPES"}], "Default": "LOAD GLPROD_MTL_TXN_SOURCE_TYPES"}, "LOAD GLPROD_MTL_TXN_SOURCE_TYPES": {"Type": "Task", "ResultPath": "$.GLPROD_MTL_TXN_SOURCE_TYPES", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_mtl_txn_source_types", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_MTL_TXN_SOURCE_TYPES_FAILED"}], "Next": "PASS GLPROD_MTL_TXN_SOURCE_TYPES"}, "SNS_GLPROD_MTL_TXN_SOURCE_TYPES_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_MTL_TXN_SOURCE_TYPES Failed!"}, "Next": "GLPROD_MTL_TXN_SOURCE_TYPES_ACTIVITY"}, "GLPROD_MTL_TXN_SOURCE_TYPES_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_MTL_TXN_SOURCE_TYPES_ACTIVITY", "End": true}, "PASS GLPROD_MTL_TXN_SOURCE_TYPES": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_WSH_DELIVERY_DETAILS", "States": {"GLPROD_WSH_DELIVERY_DETAILS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_wsh_delivery_details", "StringEquals": "Y", "Next": "PASS GLPROD_WSH_DELIVERY_DETAILS"}], "Default": "LOAD GLPROD_WSH_DELIVERY_DETAILS"}, "LOAD GLPROD_WSH_DELIVERY_DETAILS": {"Type": "Task", "ResultPath": "$.GLPROD_WSH_DELIVERY_DETAILS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_wsh_delivery_details", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_WSH_DELIVERY_DETAILS_FAILED"}], "Next": "PASS GLPROD_WSH_DELIVERY_DETAILS"}, "SNS_GLPROD_WSH_DELIVERY_DETAILS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_WSH_DELIVERY_DETAILS Failed!"}, "Next": "GLPROD_WSH_DELIVERY_DETAILS_ACTIVITY"}, "GLPROD_WSH_DELIVERY_DETAILS_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_WSH_DELIVERY_DETAILS_ACTIVITY", "End": true}, "PASS GLPROD_WSH_DELIVERY_DETAILS": {"Type": "Pass", "End": true}}}]}, "Completed": {"Type": "Pass", "InputPath": "$.SKIP_LAMBDA", "Next": "SNS_GLPROD_COMPACTION_SUCCESS"}, "SNS_GLPROD_COMPACTION_SUCCESS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.snsResult", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_SUCCESS", "Message": {"Subject": "AWS Step function for GLPROD COMPACTION completed successfully!!"}}, "End": true}}}