{"StartAt": "START MAPP_GLPROD COMPACTION JOBS", "States": {"START MAPP_GLPROD COMPACTION JOBS": {"Type": "Wait", "InputPath": "$", "Seconds": 180, "Next": "GET LAMBDA"}, "GET LAMBDA": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.GET_LAMBDA", "StringEquals": "Y", "Next": "SKIP GET LAMBDA"}], "Default": "EXECUTE GET LAMBDA"}, "EXECUTE GET LAMBDA": {"Type": "Task", "InputPath": "$", "ResultPath": "$.INPUT.BATCH_NUMBER", "Resource": "arn:aws:lambda:us-east-1:541574621075:function:ddb_get_lambda", "Next": "SKIP GET LAMBDA"}, "SKIP GET LAMBDA": {"Type": "Pass", "InputPath": "$", "ResultPath": "$.SKIP_LAMBDA", "Next": "StartParallel"}, "StartParallel": {"Type": "Parallel", "Next": "Completed", "ResultPath": "$.parallelResult", "Branches": [{"StartAt": "GLPROD_MTL_ITEM_CATEGORIES", "States": {"GLPROD_MTL_ITEM_CATEGORIES": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_mtl_item_categories", "StringEquals": "Y", "Next": "PASS GLPROD_MTL_ITEM_CATEGORIES"}], "Default": "LOAD GLPROD_MTL_ITEM_CATEGORIES"}, "LOAD GLPROD_MTL_ITEM_CATEGORIES": {"Type": "Task", "ResultPath": "$.GLPROD_MTL_ITEM_CATEGORIES", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_mtl_item_categories", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_MTL_ITEM_CATEGORIES_FAILED"}], "Next": "PASS GLPROD_MTL_ITEM_CATEGORIES"}, "SNS_GLPROD_MTL_ITEM_CATEGORIES_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_MTL_ITEM_CATEGORIES Failed!"}, "Next": "GLPROD_MTL_ITEM_CATEGORIES_ACTIVITY"}, "GLPROD_MTL_ITEM_CATEGORIES_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_MTL_ITEM_CATEGORIES_ACTIVITY", "End": true}, "PASS GLPROD_MTL_ITEM_CATEGORIES": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_MTL_CATEGORY_SETS", "States": {"GLPROD_MTL_CATEGORY_SETS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_full_refresh_glprod_mtl_category_sets", "StringEquals": "Y", "Next": "PASS GLPROD_MTL_CATEGORY_SETS"}], "Default": "LOAD GLPROD_MTL_CATEGORY_SETS"}, "LOAD GLPROD_MTL_CATEGORY_SETS": {"Type": "Task", "ResultPath": "$.GLPROD_MTL_CATEGORY_SETS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_full_refresh_glprod_mtl_category_sets", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_MTL_CATEGORY_SETS_FAILED"}], "Next": "PASS GLPROD_MTL_CATEGORY_SETS"}, "SNS_GLPROD_MTL_CATEGORY_SETS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_MTL_CATEGORY_SETS Failed!"}, "Next": "GLPROD_MTL_CATEGORY_SETS_ACTIVITY"}, "GLPROD_MTL_CATEGORY_SETS_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_MTL_CATEGORY_SETS_ACTIVITY", "End": true}, "PASS GLPROD_MTL_CATEGORY_SETS": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_MTL_CATEGORIES", "States": {"GLPROD_MTL_CATEGORIES": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_full_refresh_glprod_mtl_categories", "StringEquals": "Y", "Next": "PASS GLPROD_MTL_CATEGORIES"}], "Default": "LOAD GLPROD_MTL_CATEGORIES"}, "LOAD GLPROD_MTL_CATEGORIES": {"Type": "Task", "ResultPath": "$.GLPROD_MTL_CATEGORIES", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_full_refresh_glprod_mtl_categories", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_MTL_CATEGORIES_FAILED"}], "Next": "PASS GLPROD_MTL_CATEGORIES"}, "SNS_GLPROD_MTL_CATEGORIES_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_MTL_CATEGORIES Failed!"}, "Next": "GLPROD_MTL_CATEGORIES_ACTIVITY"}, "GLPROD_MTL_CATEGORIES_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_MTL_CATEGORIES_ACTIVITY", "End": true}, "PASS GLPROD_MTL_CATEGORIES": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_OE_ORDER_SOURCES", "States": {"GLPROD_OE_ORDER_SOURCES": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_oe_order_sources", "StringEquals": "Y", "Next": "PASS GLPROD_OE_ORDER_SOURCES"}], "Default": "LOAD GLPROD_OE_ORDER_SOURCES"}, "LOAD GLPROD_OE_ORDER_SOURCES": {"Type": "Task", "ResultPath": "$.GLPROD_OE_ORDER_SOURCES", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_oe_order_sources", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_OE_ORDER_SOURCES_FAILED"}], "Next": "PASS GLPROD_OE_ORDER_SOURCES"}, "SNS_GLPROD_OE_ORDER_SOURCES_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_OE_ORDER_SOURCES Failed!"}, "Next": "GLPROD_OE_ORDER_SOURCES_ACTIVITY"}, "GLPROD_OE_ORDER_SOURCES_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_OE_ORDER_SOURCES_ACTIVITY", "End": true}, "PASS GLPROD_OE_ORDER_SOURCES": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_OE_TRANSACTION_TYPES_ALL", "States": {"GLPROD_OE_TRANSACTION_TYPES_ALL": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_oe_transaction_types_all", "StringEquals": "Y", "Next": "PASS GLPROD_OE_TRANSACTION_TYPES_ALL"}], "Default": "LOAD GLPROD_OE_TRANSACTION_TYPES_ALL"}, "LOAD GLPROD_OE_TRANSACTION_TYPES_ALL": {"Type": "Task", "ResultPath": "$.GLPROD_OE_TRANSACTION_TYPES_ALL", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_oe_transaction_types_all", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_OE_TRANSACTION_TYPES_ALL_FAILED"}], "Next": "PASS GLPROD_OE_TRANSACTION_TYPES_ALL"}, "SNS_GLPROD_OE_TRANSACTION_TYPES_ALL_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_OE_TRANSACTION_TYPES_ALL Failed!"}, "Next": "GLPROD_OE_TRANSACTION_TYPES_ALL_ACTIVITY"}, "GLPROD_OE_TRANSACTION_TYPES_ALL_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_OE_TRANSACTION_TYPES_ALL_ACTIVITY", "End": true}, "PASS GLPROD_OE_TRANSACTION_TYPES_ALL": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_OE_TRANSACTION_TYPES_TL", "States": {"GLPROD_OE_TRANSACTION_TYPES_TL": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_oe_transaction_types_tl", "StringEquals": "Y", "Next": "PASS GLPROD_OE_TRANSACTION_TYPES_TL"}], "Default": "LOAD GLPROD_OE_TRANSACTION_TYPES_TL"}, "LOAD GLPROD_OE_TRANSACTION_TYPES_TL": {"Type": "Task", "ResultPath": "$.GLPROD_OE_TRANSACTION_TYPES_TL", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_oe_transaction_types_tl", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_OE_TRANSACTION_TYPES_TL_FAILED"}], "Next": "PASS GLPROD_OE_TRANSACTION_TYPES_TL"}, "SNS_GLPROD_OE_TRANSACTION_TYPES_TL_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_OE_TRANSACTION_TYPES_TL Failed!"}, "Next": "GLPROD_OE_TRANSACTION_TYPES_TL_ACTIVITY"}, "GLPROD_OE_TRANSACTION_TYPES_TL_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_OE_TRANSACTION_TYPES_TL_ACTIVITY", "End": true}, "PASS GLPROD_OE_TRANSACTION_TYPES_TL": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_GEHC_GPO_STALLED_ORDER_REASON", "States": {"GLPROD_GEHC_GPO_STALLED_ORDER_REASON": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_gehc_gpo_stalled_order_reason", "StringEquals": "Y", "Next": "PASS GLPROD_GEHC_GPO_STALLED_ORDER_REASON"}], "Default": "LOAD GLPROD_GEHC_GPO_STALLED_ORDER_REASON"}, "LOAD GLPROD_GEHC_GPO_STALLED_ORDER_REASON": {"Type": "Task", "ResultPath": "$.GLPROD_GEHC_GPO_STALLED_ORDER_REASON", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_gehc_gpo_stalled_order_reason", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_GEHC_GPO_STALLED_ORDER_REASON_FAILED"}], "Next": "PASS GLPROD_GEHC_GPO_STALLED_ORDER_REASON"}, "SNS_GLPROD_GEHC_GPO_STALLED_ORDER_REASON_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_GEHC_GPO_STALLED_ORDER_REASON Failed!"}, "Next": "GLPROD_GEHC_GPO_STALLED_ORDER_REASON_ACTIVITY"}, "GLPROD_GEHC_GPO_STALLED_ORDER_REASON_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_GEHC_GPO_STALLED_ORDER_REASON_ACTIVITY", "End": true}, "PASS GLPROD_GEHC_GPO_STALLED_ORDER_REASON": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_FND_LOOKUP_VALUES", "States": {"GLPROD_FND_LOOKUP_VALUES": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_fnd_lookup_values", "StringEquals": "Y", "Next": "PASS GLPROD_FND_LOOKUP_VALUES"}], "Default": "LOAD GLPROD_FND_LOOKUP_VALUES"}, "LOAD GLPROD_FND_LOOKUP_VALUES": {"Type": "Task", "ResultPath": "$.GLPROD_FND_LOOKUP_VALUES", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_fnd_lookup_values", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_FND_LOOKUP_VALUES_FAILED"}], "Next": "PASS GLPROD_FND_LOOKUP_VALUES"}, "SNS_GLPROD_FND_LOOKUP_VALUES_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_FND_LOOKUP_VALUES Failed!"}, "Next": "GLPROD_FND_LOOKUP_VALUES_ACTIVITY"}, "GLPROD_FND_LOOKUP_VALUES_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_FND_LOOKUP_VALUES_ACTIVITY", "End": true}, "PASS GLPROD_FND_LOOKUP_VALUES": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_GL_CODE_COMBINATIONS", "States": {"GLPROD_GL_CODE_COMBINATIONS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_gl_code_combinations", "StringEquals": "Y", "Next": "PASS GLPROD_GL_CODE_COMBINATIONS"}], "Default": "LOAD GLPROD_GL_CODE_COMBINATIONS"}, "LOAD GLPROD_GL_CODE_COMBINATIONS": {"Type": "Task", "ResultPath": "$.GLPROD_GL_CODE_COMBINATIONS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_gl_code_combinations", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_GL_CODE_COMBINATIONS_FAILED"}], "Next": "PASS GLPROD_GL_CODE_COMBINATIONS"}, "SNS_GLPROD_GL_CODE_COMBINATIONS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_GL_CODE_COMBINATIONS Failed!"}, "Next": "GLPROD_GL_CODE_COMBINATIONS_ACTIVITY"}, "GLPROD_GL_CODE_COMBINATIONS_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_GL_CODE_COMBINATIONS_ACTIVITY", "End": true}, "PASS GLPROD_GL_CODE_COMBINATIONS": {"Type": "Pass", "End": true}}}, {"StartAt": "GLPROD_MTL_MATERIAL_TRANSACTIONS", "States": {"GLPROD_MTL_MATERIAL_TRANSACTIONS": {"Type": "Choice", "Choices": [{"Variable": "$.INPUT.job_lnd_mrr_incr_refresh_ov_glprod_mtl_material_transactions", "StringEquals": "Y", "Next": "PASS GLPROD_MTL_MATERIAL_TRANSACTIONS"}], "Default": "LOAD GLPROD_MTL_MATERIAL_TRANSACTIONS"}, "LOAD GLPROD_MTL_MATERIAL_TRANSACTIONS": {"Type": "Task", "ResultPath": "$.GLPROD_MTL_MATERIAL_TRANSACTIONS", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "job_lnd_mrr_incr_refresh_ov_glprod_mtl_material_transactions", "Arguments": {"--batch_number.$": "$.INPUT.BATCH_NUMBER"}}, "Retry": [{"ErrorEquals": ["States.Timeout"], "MaxAttempts": 3, "IntervalSeconds": 60, "BackoffRate": 2}], "Catch": [{"ErrorEquals": ["States.TaskFailed"], "Next": "SNS_GLPROD_MTL_MATERIAL_TRANSACTIONS_FAILED"}], "Next": "PASS GLPROD_MTL_MATERIAL_TRANSACTIONS"}, "SNS_GLPROD_MTL_MATERIAL_TRANSACTIONS_FAILED": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_FAILURE", "Message.$": "$.Cause", "Subject": " AWS Glue job for SNS_GLPROD_MTL_MATERIAL_TRANSACTIONS Failed!"}, "Next": "GLPROD_MTL_MATERIAL_TRANSACTIONS_ACTIVITY"}, "GLPROD_MTL_MATERIAL_TRANSACTIONS_ACTIVITY": {"Type": "Task", "Resource": "arn:aws:states:us-east-1:541574621075:activity:COMPACTION_GLPROD_MTL_MATERIAL_TRANSACTIONS_ACTIVITY", "End": true}, "PASS GLPROD_MTL_MATERIAL_TRANSACTIONS": {"Type": "Pass", "End": true}}}]}, "Completed": {"Type": "Pass", "InputPath": "$.SKIP_LAMBDA", "Next": "SNS_GLPROD_COMPACTION_SUCCESS"}, "SNS_GLPROD_COMPACTION_SUCCESS": {"Type": "Task", "InputPath": "$", "ResultPath": "$.snsResult", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn": "arn:aws:sns:us-east-1:541574621075:ODP_SFN_SUCCESS", "Message": {"Subject": "AWS Step function for GLPROD COMPACTION completed successfully!!"}}, "End": true}}}