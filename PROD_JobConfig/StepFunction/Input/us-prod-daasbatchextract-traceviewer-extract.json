{"Comment": "traceviewer", "StartAt": "Perform dependency check", "States": {"Perform dependency check": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract-dependency-checker", "Arguments": {"--STATUS_FILE_PATHS.$": "$.CONFIG.STATUS_FILE_PATHS", "--CHECK_INTERVAL_MIN.$": "$.CONFIG.CHECK_INTERVAL_MIN", "--MAX_CHECK_ATTEMPTS.$": "$.CONFIG.MAX_CHECK_ATTEMPTS"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.TaskFailed"], "ResultPath": "$.dependency_check_status", "Next": "Notify_Failed_Dependency_Check"}], "Next": "START traceviewer extracts"}, "Notify_Failed_Dependency_Check": {"Type": "Task", "Resource": "arn:aws:states:::sns:publish", "Parameters": {"TopicArn.$": "$.CONFIG.FAILURE_SNS_TOPIC", "Message": "Required dependecy could not satisfy for traceviewer", "Subject": "traceviewer: Required dependecy could not satisfy."}, "End": true}, "START traceviewer extracts": {"Type": "Pass", "Next": "CHECK ODP_GIB_Trace"}, "CHECK ODP_GIB_Trace": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_GIB_Trace", "StringEquals": "Y", "Next": "SKIP ODP_GIB_Trace"}], "Default": "EXTRACT ODP_GIB_Trace"}, "EXTRACT ODP_GIB_Trace": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "1"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SAM_Interventions"}], "Next": "CHECK ODP_SAM_Interventions"}, "SKIP ODP_GIB_Trace": {"Type": "Pass", "Next": "CHECK ODP_SAM_Interventions"}, "CHECK ODP_SAM_Interventions": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SAM_Interventions", "StringEquals": "Y", "Next": "SKIP ODP_SAM_Interventions"}], "Default": "EXTRACT ODP_SAM_Interventions"}, "EXTRACT ODP_SAM_Interventions": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "2"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SAM_ServiceRegion_ZipCode"}], "Next": "CHECK ODP_SAM_ServiceRegion_ZipCode"}, "SKIP ODP_SAM_Interventions": {"Type": "Pass", "Next": "CHECK ODP_SAM_ServiceRegion_ZipCode"}, "CHECK ODP_SAM_ServiceRegion_ZipCode": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SAM_ServiceRegion_ZipCode", "StringEquals": "Y", "Next": "SKIP ODP_SAM_ServiceRegion_ZipCode"}], "Default": "EXTRACT ODP_SAM_ServiceRegion_ZipCode"}, "EXTRACT ODP_SAM_ServiceRegion_ZipCode": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "3"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SAM_Systems"}], "Next": "CHECK ODP_SAM_Systems"}, "SKIP ODP_SAM_ServiceRegion_ZipCode": {"Type": "Pass", "Next": "CHECK ODP_SAM_Systems"}, "CHECK ODP_SAM_Systems": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SAM_Systems", "StringEquals": "Y", "Next": "SKIP ODP_SAM_Systems"}], "Default": "EXTRACT ODP_SAM_Systems"}, "EXTRACT ODP_SAM_Systems": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "4"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SAM_Systems_P_S_T"}], "Next": "CHECK ODP_SAM_Systems_P_S_T"}, "SKIP ODP_SAM_Systems": {"Type": "Pass", "Next": "CHECK ODP_SAM_Systems_P_S_T"}, "CHECK ODP_SAM_Systems_P_S_T": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SAM_Systems_P_S_T", "StringEquals": "Y", "Next": "SKIP ODP_SAM_Systems_P_S_T"}], "Default": "EXTRACT ODP_SAM_Systems_P_S_T"}, "EXTRACT ODP_SAM_Systems_P_S_T": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "5"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SAM_Technicians"}], "Next": "CHECK ODP_SAM_Technicians"}, "SKIP ODP_SAM_Systems_P_S_T": {"Type": "Pass", "Next": "CHECK ODP_SAM_Technicians"}, "CHECK ODP_SAM_Technicians": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SAM_Technicians", "StringEquals": "Y", "Next": "SKIP ODP_SAM_Technicians"}], "Default": "EXTRACT ODP_SAM_Technicians"}, "EXTRACT ODP_SAM_Technicians": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "6"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SIT_Contracts_India_SDT"}], "Next": "CHECK ODP_SIT_Contracts_India_SDT"}, "SKIP ODP_SAM_Technicians": {"Type": "Pass", "Next": "CHECK ODP_SIT_Contracts_India_SDT"}, "CHECK ODP_SIT_Contracts_India_SDT": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SIT_Contracts_India_SDT", "StringEquals": "Y", "Next": "SKIP ODP_SIT_Contracts_India_SDT"}], "Default": "EXTRACT ODP_SIT_Contracts_India_SDT"}, "EXTRACT ODP_SIT_Contracts_India_SDT": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "7"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SIT_Contracts_SDT"}], "Next": "CHECK ODP_SIT_Contracts_SDT"}, "SKIP ODP_SIT_Contracts_India_SDT": {"Type": "Pass", "Next": "CHECK ODP_SIT_Contracts_SDT"}, "CHECK ODP_SIT_Contracts_SDT": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SIT_Contracts_SDT", "StringEquals": "Y", "Next": "SKIP ODP_SIT_Contracts_SDT"}], "Default": "EXTRACT ODP_SIT_Contracts_SDT"}, "EXTRACT ODP_SIT_Contracts_SDT": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "8"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SIT_Engineers_SDT"}], "Next": "CHECK ODP_SIT_Engineers_SDT"}, "SKIP ODP_SIT_Contracts_SDT": {"Type": "Pass", "Next": "CHECK ODP_SIT_Engineers_SDT"}, "CHECK ODP_SIT_Engineers_SDT": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SIT_Engineers_SDT", "StringEquals": "Y", "Next": "SKIP ODP_SIT_Engineers_SDT"}], "Default": "EXTRACT ODP_SIT_Engineers_SDT"}, "EXTRACT ODP_SIT_Engineers_SDT": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "9"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SIT_Interventions"}], "Next": "CHECK ODP_SIT_Interventions"}, "SKIP ODP_SIT_Engineers_SDT": {"Type": "Pass", "Next": "CHECK ODP_SIT_Interventions"}, "CHECK ODP_SIT_Interventions": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SIT_Interventions", "StringEquals": "Y", "Next": "SKIP ODP_SIT_Interventions"}], "Default": "EXTRACT ODP_SIT_Interventions"}, "EXTRACT ODP_SIT_Interventions": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "10"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SIT_Primary_FE"}], "Next": "CHECK ODP_SIT_Primary_FE"}, "SKIP ODP_SIT_Interventions": {"Type": "Pass", "Next": "CHECK ODP_SIT_Primary_FE"}, "CHECK ODP_SIT_Primary_FE": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SIT_Primary_FE", "StringEquals": "Y", "Next": "SKIP ODP_SIT_Primary_FE"}], "Default": "EXTRACT ODP_SIT_Primary_FE"}, "EXTRACT ODP_SIT_Primary_FE": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "11"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SIT_Systems"}], "Next": "CHECK ODP_SIT_Systems"}, "SKIP ODP_SIT_Primary_FE": {"Type": "Pass", "Next": "CHECK ODP_SIT_Systems"}, "CHECK ODP_SIT_Systems": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SIT_Systems", "StringEquals": "Y", "Next": "SKIP ODP_SIT_Systems"}], "Default": "EXTRACT ODP_SIT_Systems"}, "EXTRACT ODP_SIT_Systems": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "12"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SIT_Systems_SDT"}], "Next": "CHECK ODP_SIT_Systems_SDT"}, "SKIP ODP_SIT_Systems": {"Type": "Pass", "Next": "CHECK ODP_SIT_Systems_SDT"}, "CHECK ODP_SIT_Systems_SDT": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SIT_Systems_SDT", "StringEquals": "Y", "Next": "SKIP ODP_SIT_Systems_SDT"}], "Default": "EXTRACT ODP_SIT_Systems_SDT"}, "EXTRACT ODP_SIT_Systems_SDT": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "13"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SIT_Technicians"}], "Next": "CHECK ODP_SIT_Technicians"}, "SKIP ODP_SIT_Systems_SDT": {"Type": "Pass", "Next": "CHECK ODP_SIT_Technicians"}, "CHECK ODP_SIT_Technicians": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SIT_Technicians", "StringEquals": "Y", "Next": "SKIP ODP_SIT_Technicians"}], "Default": "EXTRACT ODP_SIT_Technicians"}, "EXTRACT ODP_SIT_Technicians": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "14"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SMAX_Interventions_Japan"}], "Next": "CHECK ODP_SMAX_Interventions_Japan"}, "SKIP ODP_SIT_Technicians": {"Type": "Pass", "Next": "CHECK ODP_SMAX_Interventions_Japan"}, "CHECK ODP_SMAX_Interventions_Japan": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SMAX_Interventions_Japan", "StringEquals": "Y", "Next": "SKIP ODP_SMAX_Interventions_Japan"}], "Default": "EXTRACT ODP_SMAX_Interventions_Japan"}, "EXTRACT ODP_SMAX_Interventions_Japan": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "15"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SMAX_LatAm_Interventions"}], "Next": "CHECK ODP_SMAX_LatAm_Interventions"}, "SKIP ODP_SMAX_Interventions_Japan": {"Type": "Pass", "Next": "CHECK ODP_SMAX_LatAm_Interventions"}, "CHECK ODP_SMAX_LatAm_Interventions": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SMAX_LatAm_Interventions", "StringEquals": "Y", "Next": "SKIP ODP_SMAX_LatAm_Interventions"}], "Default": "EXTRACT ODP_SMAX_LatAm_Interventions"}, "EXTRACT ODP_SMAX_LatAm_Interventions": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "16"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SMAX_LatAm_Systems"}], "Next": "CHECK ODP_SMAX_LatAm_Systems"}, "SKIP ODP_SMAX_LatAm_Interventions": {"Type": "Pass", "Next": "CHECK ODP_SMAX_LatAm_Systems"}, "CHECK ODP_SMAX_LatAm_Systems": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SMAX_LatAm_Systems", "StringEquals": "Y", "Next": "SKIP ODP_SMAX_LatAm_Systems"}], "Default": "EXTRACT ODP_SMAX_LatAm_Systems"}, "EXTRACT ODP_SMAX_LatAm_Systems": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "17"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SMAX_LatAm_Technicians"}], "Next": "CHECK ODP_SMAX_LatAm_Technicians"}, "SKIP ODP_SMAX_LatAm_Systems": {"Type": "Pass", "Next": "CHECK ODP_SMAX_LatAm_Technicians"}, "CHECK ODP_SMAX_LatAm_Technicians": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SMAX_LatAm_Technicians", "StringEquals": "Y", "Next": "SKIP ODP_SMAX_LatAm_Technicians"}], "Default": "EXTRACT ODP_SMAX_LatAm_Technicians"}, "EXTRACT ODP_SMAX_LatAm_Technicians": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "18"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SMAX_Systems_Japan"}], "Next": "CHECK ODP_SMAX_Systems_Japan"}, "SKIP ODP_SMAX_LatAm_Technicians": {"Type": "Pass", "Next": "CHECK ODP_SMAX_Systems_Japan"}, "CHECK ODP_SMAX_Systems_Japan": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SMAX_Systems_Japan", "StringEquals": "Y", "Next": "SKIP ODP_SMAX_Systems_Japan"}], "Default": "EXTRACT ODP_SMAX_Systems_Japan"}, "EXTRACT ODP_SMAX_Systems_Japan": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "19"}}, "ResultPath": null, "Catch": [{"ErrorEquals": ["States.ALL"], "ResultPath": null, "Next": "CHECK ODP_SMAX_Technicians_Japan"}], "Next": "CHECK ODP_SMAX_Technicians_Japan"}, "SKIP ODP_SMAX_Systems_Japan": {"Type": "Pass", "Next": "CHECK ODP_SMAX_Technicians_Japan"}, "CHECK ODP_SMAX_Technicians_Japan": {"Type": "Choice", "Choices": [{"Variable": "$.SFN_INPUT.ODP_SMAX_Technicians_Japan", "StringEquals": "Y", "Next": "SKIP ODP_SMAX_Technicians_Japan"}], "Default": "EXTRACT ODP_SMAX_Technicians_Japan"}, "EXTRACT ODP_SMAX_Technicians_Japan": {"Type": "Task", "Resource": "arn:aws:states:::glue:startJobRun.sync", "Parameters": {"JobName": "us-prod-daasbatchextract", "Arguments": {"--application_name": "traceviewer", "--extract_number": "20"}}, "ResultPath": null, "End": true}, "SKIP ODP_SMAX_Technicians_Japan": {"Type": "Pass", "End": true}}}